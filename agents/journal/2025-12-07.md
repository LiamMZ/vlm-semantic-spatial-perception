### 2025-12-07-1623 – Inline helper translation

- **Owner**: AI Agent (refactor)
- **Agents affected**: PrimitiveExecutor
- **Git commit(s)**: Based on 250a66655375b7095bc801a5d42cff31392b6ba8
- **Context**: Requested to collapse `_translate_helper_parameters` into `prepare_plan` for clarity while retaining hard failures on missing depth/intrinsics or back-projection.
- **Actions**: Inlined target pixel back-projection/offset handling inside the per-primitive loop and removed the helper method.
- **Result**: Translation logic now lives entirely in `prepare_plan` with the same failure semantics. Tests not rerun (torch/google.genai deps absent).
- **References**: `src/primitives/primitive_executor.py`

### 2025-12-07-1620 – Enforce back-projection failures

- **Owner**: AI Agent (refactor)
- **Agents affected**: PrimitiveExecutor
- **Git commit(s)**: Based on 250a66655375b7095bc801a5d42cff31392b6ba8
- **Context**: Back-projection misses were silently logged as warnings; requirement is to hard-fail with full stack context.
- **Actions**: Raised runtime errors when depth/intrinsics are missing or back-projection returns None for `target_pixel_yx` translation.
- **Result**: Executor now propagates errors (with stack traces) on translation failures instead of continuing. Tests not rerun (torch/google.genai deps absent).
- **References**: `src/primitives/primitive_executor.py`

### 2025-12-07-1612 – Simplify back-projection path

- **Owner**: AI Agent (refactor)
- **Agents affected**: PrimitiveExecutor, primitive docs/config
- **Git commit(s)**: Based on 250a66655375b7095bc801a5d42cff31392b6ba8
- **Context**: Requested to inline pixel back-projection, drop unused pivot helper translation, and always translate from `target_pixel_yx` (no `position_2d` fallback) to align executor behavior with orchestrator logging.
- **Actions**:
  - Inlined back-projection inside `_translate_helper_parameters`, removed `pivot_pixel_yx` handling, and simplified translation to consume only `target_pixel_yx` (with 3D override when provided).
  - Updated planning/primitives docs and primitive catalog text to drop pivot helper references.
- **Result**: Translation now logs back-projection misses directly and only translates `target_pixel_yx`; pivot helper docs cleaned up. Tests not re-run (torch/google.genai deps missing).
- **References**: `src/primitives/primitive_executor.py`, `docs/planning.md`, `agents/design/primitive_task_breakdown_plan.md`, `config/primitive_descriptions.md`

### 2025-12-07-1605 – PrimitiveExecutor logging & failure handling

- **Owner**: AI Agent (logging refactor)
- **Agents affected**: PrimitiveExecutor, TaskAndMotionPlanner, run_cached_plan, primitives docs/tests
- **Git commit(s)**: Based on 250a66655375b7095bc801a5d42cff31392b6ba8
- **Context**: PrimitiveExecutor was returning warning/error lists instead of relying on structured logging and exceptions; updated behavior to propagate orchestrator logging and fail fast.
- **Actions**:
  - Routed PrimitiveExecutor translation/execution messaging through structured logging, raised on validation/primitive binding failures, and injected the orchestrator logger into the executor.
  - Updated call sites, scripts, and tests to drop warnings/errors payloads (capturing warnings via logging where needed) and aligned TAMP executor handling.
  - Refreshed primitive execution docs to describe logging-driven warnings and exception paths.
- **Result**: Executor now logs warnings and raises errors instead of collecting message lists; task planner/demo code align with the new contract. Targeted pytest runs were blocked locally by missing `torch` and `google.genai` dependencies.
- **References**: `src/primitives/primitive_executor.py`, `src/task_motion_planner.py`, `scripts/run_cached_plan.py`, `tests/test_primitive_executor.py`, `tests/test_pick_translation_to_xarm.py`, `docs/planning.md`, `agents/design/primitive_task_breakdown_plan.md`
